<!-- enlighted-link @version: 0.0.0 @license: MIT -->
<script>
customElements.define('enlighted-link', class extends HTMLElement{
    static get observedAttributes(){
        return [
            // content attrs
            'href',
            'rel',
            'media',
            'hreflang',
            'type',
            'sizes',
            'title'
        ]
    }
    connectedCallback(){
        const link = this.link = this.link || document.createElement('link');

        for(let attrNo = 0, len = this.attributes.length; attrNo < len; attrNo++){
            link.setAttribute(this.attributes[attrNo].name, this.attributes[attrNo].value);
        }
        document.head.appendChild(link);
        // TODO/FIXME(tomalec): attach mutation observer on links parent, to detach this in case link is detached
        // so we can free GC, and make it mahave more predictably. And to observe the links attributes
    }
    disconnectedCallback(){
        this.link.remove();
    }
    attributeChangedCallback(name, oldVal, newVal){
        if(this.link){
            if(newVal !== null){
                this.link.setAttribute(name, newVal);
            } else {
                this.link.removeAttribute(name);
            }
        }
    }
});
</script>
